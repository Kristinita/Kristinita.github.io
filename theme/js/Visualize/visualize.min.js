!function(c){"use strict";c.fn.visualize=function(r){var s=r.type||"pie";this.each(function(t,i){var e,a=r.width||300,n=r.height||r.width||300,o=c("<canvas width="+a+" height="+n+"></canvas>").html(i.innerHTML),h=d(i);"pie"===s?e=new l(h,a):"bar"===s&&(e=new p(h,a,n)),c(i).html(o),e.plot(o[0]),r.legend&&e.legend(i,a)})};var e=function(){};e.prototype.legend=function(t,i){var a=c("<div></div>").css("width",i);c.each(this.items,function(t,i){var e=c("<span></span>").css({background:i.color,width:"10px",height:"10px",display:"inline-block",margin:"0 5px"});a.append(e).append(i.label)}),c(t).append(a)};var l=function(t,i){e.call(this),this.radius=i/2,this.items=t};l.prototype=Object.create(e.prototype),l.prototype.getTotal=function(){var e=0;return c.each(this.items,function(t,i){e+=i.data}),e},l.prototype.plot=function(t){var i=0,e=this.radius,a=this.radius,n=t.getContext("2d"),o=this.getTotal();n.clearRect(0,0,t.width,t.height);for(var h=0;h<this.items.length;h++){var r=this.items[h];n.fillStyle=r.color,n.beginPath(),n.moveTo(e,a),n.arc(e,a,a,i,i+2*Math.PI*(r.data/o),!1),n.lineTo(e,a),n.fill(),i+=2*Math.PI*(r.data/o)}};var p=function(t,i,e){this.items=t,this.width=i,this.height=e};p.prototype=Object.create(e.prototype),p.prototype.getWidth=function(){return this.width/this.items.length},p.prototype.getMax=function(){var t=this.items.map(function(t){return t.data});return Math.max.apply(Math,t)},p.prototype.plot=function(t){var i=this.getWidth(),e=this.height,a=this.getMax(),n=t.getContext("2d");n.clearRect(0,0,t.width,t.height);for(var o=0;o<this.items.length;o++){var h=this.items[o],r=h.data/a*e,s=i*o,c=e-r;n.beginPath(),n.rect(s,c,i-1,r),n.fillStyle=h.color,n.fill()}};var d=function(t){var e=[];return c.each(c(t).find(".visualize"),function(t,i){e.push({data:c(i).data("value"),color:c(i).data("color")||function(){for(var t="0123456789ABCDEF".split(""),i="#",e=0;e<6;e++)i+=t[Math.round(15*Math.random())];return i}(),label:i.textContent})}),e}}(jQuery);
//# sourceMappingURL=visualize.min.js.map
